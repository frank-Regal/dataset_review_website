<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dataset Review</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h1, h2 {
            margin-bottom: 20px;
        }
        .video-entry {
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        /* .progress-bar {
            width: 200px;
            height: 20px;
            background-color: #ddd;
            margin-left: 20px;
            position: relative;
        }
        .progress {
            height: 100%;
            background-color: green;
        } */
        .gray-out {
            color: gray;
            pointer-events: none; /* Makes it unclickable */
        }
        .status-text {
            margin-left: 10px;
            font-weight: bold;
        }
        .todo-text {
            font-weight: bold;
            color: #4568bf;
        }
        .verified-text {
            font-weight: bold;
            color: green;
        }
        .revisit-text {
            font-weight: bold;
            color: orange;
        }
    </style>
</head>
<body>

    <h1>Dataset Review Homepage</h1>
    <h5>Contact Frank Regal [fregal@utexas.edu] for any difficulties / questions.</h5>
    <div id="video-list"></div>

    <script>
        async function loadVideoProgress() {
            try {
                const response = await fetch('/video-status'); // Fetch progress from the backend
                if (!response.ok) {
                    throw new Error('Failed to fetch video progress');
                }

                const videos = await response.json();

                const videoList = document.getElementById('video-list');
                videoList.innerHTML = ''; // Clear existing content

                videos.forEach(videoData => {
                    const { video, status } = videoData;

                    const videoEntry = document.createElement('div');
                    videoEntry.className = 'video-entry';

                    const videoName = document.createElement('a');
                    videoName.textContent = video;
                    videoName.href = `/annotate.html?video=${video}`;

                    const statusSpan = document.createElement('span');
                    statusSpan.className = `${status}-text`;
                    statusSpan.textContent = status.toUpperCase();
                    statusSpan.style.marginLeft = '10px'; // Increased margin for better alignment
                    statusSpan.style.display = 'inline-block'; // Makes alignment more consistent
                    statusSpan.style.width = '100px'; // Fixed width for alignment
                    statusSpan.style.textAlign = 'left'; // Left align the text

                    videoEntry.appendChild(statusSpan);
                    videoEntry.appendChild(videoName);
                    videoList.appendChild(videoEntry);
                });
            } catch (error) {
                console.error('Error loading video progress:', error);
            }
        }

        window.onload = loadVideoProgress;
    </script>

</body>
</html>
